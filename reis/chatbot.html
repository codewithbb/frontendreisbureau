<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reis Chatbot</title>

  <link rel="stylesheet" href="/assets/css/core.css" />
  <link rel="stylesheet" href="/assets/css/reis.css" />

  <!-- Speech SDK for microphone -->
  <script src="https://aka.ms/csspeech/jsbrowserpackageraw"></script>

  <!-- Marked.js for Markdown parsing -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>

<body class="reis">
  <div id="nav-placeholder"></div>

  <main class="reis-chat">
    <!-- HERO -->
    <header class="chat-hero">
      <div class="chat-hero-inner">
        <div>
          <p class="booking-eyebrow">Assistent</p>
          <h1>Reis Chatbot</h1>
          <p class="booking-lead">
            Stel vragen over reizen en vluchten. De chatbot kan ook je komende reizen bekijken en (waar beschikbaar) een vlucht voor je boeken.
          </p>

          <div class="chat-badges">
            <span class="badge">ğŸ’¬ Q&amp;A</span>
            <span class="badge">ğŸ§  Embeddings</span>
            <span class="badge">ğŸ§¾ Intents</span>
            <span class="badge">ğŸ¤ Spraak</span>
          </div>
        </div>

        <div class="chat-hero-note">
          <div class="map-note-card">
            <strong>Tip</strong>
            <p class="muted" style="margin:6px 0 0;">
              Probeer: â€œZoek een vlucht naar Barcelonaâ€, â€œWelke reizen heb ik binnenkort?â€ of â€œBoek die vluchtâ€.
            </p>
          </div>
        </div>
      </div>
    </header>

    <section class="chat-layout">
      <!-- Logged out -->
      <section id="chatbot-logged-out" class="card chat-state hidden">
        <div class="card-header">
          <div>
            <h2 class="card-title">Inloggen vereist</h2>
            <p class="card-subtitle">Je moet ingelogd zijn om de chatbot te gebruiken.</p>
          </div>
        </div>

        <div class="button-container">
          <a class="btn btn-primary" href="/reis/mijn-reizen.html">Naar inloggen</a>
          <a class="btn btn-secondary" href="/reis/index.html">Terug naar Reisbureau</a>
        </div>
      </section>

      <!-- Logged in UI -->
      <section id="chatbot-ui" class="card chat-card hidden">
        <div class="chat-head">
          <div>
            <div class="card-title">Chat</div>
            <p class="meta">Enter = verzenden â€¢ Shift+Enter = nieuwe regel</p>
          </div>

          <div class="row">
            <button id="chatbot-clear" type="button" class="btn btn-secondary">Chat wissen</button>
          </div>
        </div>

        <div id="chat-window" class="chat-log" role="log" aria-live="polite" aria-label="Chatgeschiedenis">
          <div class="chat-msg bot">
            <div class="who">ğŸ¤– Chatbot <span class="dot-sep">â€¢</span> <span>klaar</span></div>
            <div class="bubble">
              <p style="margin:0;">
                Waar kan ik je mee helpen? Bijvoorbeeld: â€œZoek een vlucht naar Barcelonaâ€, â€œWelke reizen heb ik binnenkort?â€ of â€œBoek die vlucht.â€
              </p>
            </div>
          </div>
        </div>

        <div class="chat-controls">
          <div class="chat-input-row">
            <label for="user-message">Je bericht</label>
            <textarea id="user-message" placeholder="Typ hier je vraag..." rows="3"></textarea>
          </div>

          <div class="chat-actions">
            <div class="field">
              <label for="chatbot-lang" style="margin-top:0;">Taal voor spraakherkenning</label>
              <select id="chatbot-lang">
                <option value="nl-NL">Nederlands (NL)</option>
                <option value="en-US">Engels (US)</option>
              </select>
            </div>

            <button id="chatbot-mic" type="button" class="btn btn-secondary chatbot-mic-btn">ğŸ¤ Spreek</button>
            <button id="chatbot-send" type="button" class="btn btn-primary">Versturen</button>
          </div>

          <div id="chatbot-status" class="chat-status"></div>
        </div>
      </section>

      <!-- Sidebar: Capabilities / Examples (pure UI, geen JS nodig) -->
      <aside class="card chat-side">
        <div class="card-header">
          <div>
            <h2 class="card-title">Wat kan ik vragen?</h2>
            <p class="card-subtitle">Snelle voorbeelden voor je demo.</p>
          </div>
        </div>

        <div class="chat-side-list">
          <button type="button" class="chat-prompt" data-prompt="Zoek een vlucht naar Barcelona volgende week">
            âœˆï¸ Zoek een vlucht naar Barcelona volgende week
          </button>
          <button type="button" class="chat-prompt" data-prompt="Welke reizen heb ik binnenkort?">
            ğŸ§³ Welke reizen heb ik binnenkort?
          </button>
          <button type="button" class="chat-prompt" data-prompt="Boek die vlucht voor 2 personen, mijn mail is julian@example.com">
            âœ… Boek die vlucht voor 2 personenâ€¦
          </button>
          <button type="button" class="chat-prompt" data-prompt="Wat zijn de last-minutes naar Spanje?">
            âš¡ Wat zijn de last-minutes naar Spanje?
          </button>
        </div>

        <div class="scan-tips" style="margin-top:12px;">
          <strong>Demo tip</strong>
          <p class="muted" style="margin:6px 0 0;">
            Laat eerst een â€œzoekâ€ intent zien en daarna â€œboek die vluchtâ€ als vervolgvraag. Dat maakt het agentic stuk duidelijk.
          </p>
        </div>
      </aside>
    </section>
  </main>

  <script src="/assets/js/nav-reis.js" defer></script>
  <script src="/assets/js/session.js" defer></script>
  <script src="/assets/js/chatbot.js" defer></script>

  <!-- mini UX: prompt buttons vullen de textarea (geen impact op je bestaande chatbot.js) -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const box = document.getElementById("user-message");
      document.querySelectorAll(".chat-prompt").forEach(btn => {
        btn.addEventListener("click", () => {
          if (!box) return;
          box.value = btn.dataset.prompt || "";
          box.focus();
        });
      });
    });
  </script>
</body>
</html>
