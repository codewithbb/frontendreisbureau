<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Last-minutes</title>

  <link rel="stylesheet" href="/assets/css/core.css" />
  <link rel="stylesheet" href="/assets/css/reis.css" />

  <!-- Page-specific styling (mag later naar reis.css) -->
  <style>
    .filters-grid{
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 12px;
      margin-top: 10px;
    }
    @media (max-width: 900px){
      .filters-grid{ grid-template-columns: 1fr; }
    }
    .table-wrap{
      overflow: auto;
      border-radius: var(--radius-lg);
      border: 1px solid var(--border);
      background: rgba(255,255,255,.04);
    }
    /* Make table look nice in reis theme */
    .table-wrap table{
      min-width: 720px;
      background: transparent;
    }
    .table-wrap th{
      position: sticky;
      top: 0;
      background: rgba(255,255,255,.08);
      backdrop-filter: blur(10px);
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,.06);
      color: rgb(0, 0, 0);
      font-size: 13px;
      font-weight: 650;
    }
  </style>
</head>

<body class="reis">
  <div id="nav-placeholder"></div>

  <main class="page">
    <header class="page-title">
      <h1>Last-minutes</h1>
      <p>
        Binnen 4 weken naar de zon? Filter op bestemming, vertrekdatum en aantal personen en bekijk direct welke vluchten nog plekken over hebben.
      </p>

      <div class="row" style="margin-top:10px;">
        <span class="badge">‚òÄÔ∏è Vertrek vanaf Schiphol</span>
        <span class="badge">‚ö° Last-minute deals</span>
        <span class="badge">üë• Filter op personen</span>
      </div>
    </header>

    <!-- Filters -->
    <section class="card">
      <div class="card-header">
        <div>
          <h2 class="card-title">Filters</h2>
          <p class="card-subtitle">Pas de filters aan om de resultaten te verfijnen.</p>
        </div>
        <button id="btn-reset-filters" class="btn btn-secondary" type="button">Filters wissen</button>
      </div>

      <div class="filters-grid" id="filters">
        <div>
          <label for="bestemmingFilter">Bestemming</label>
          <select id="bestemmingFilter">
            <option value="all">Alle bestemmingen</option>
          </select>
        </div>

        <div>
          <label for="vertrekdatumFilter">Vertrekdatum</label>
          <select id="vertrekdatumFilter">
            <option value="all">Alle datums</option>
          </select>
        </div>

        <div>
          <label for="personenFilter">Personen</label>
          <select id="personenFilter">
            <option value="all">Aantal personen</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
          </select>
        </div>
      </div>

      <div id="filters-meta" class="help-text" style="margin-top:10px;">
        Laden van resultaten‚Ä¶
      </div>
    </section>

    <!-- Results -->
    <section class="card">
      <div class="card-header">
        <div>
          <h2 class="card-title">Beschikbare last-minutes</h2>
          <p class="card-subtitle">Overzicht van aankomende vluchten met beschikbare plaatsen.</p>
        </div>
      </div>

      <div id="tableContainer" class="table-container">
        <div class="alert" style="margin:0;">Bezig met laden‚Ä¶</div>
      </div>

      <div class="help-text" style="margin-top:10px;">
        Tip: Sorteer via je browser door te selecteren en kopi√´ren naar Excel, of voeg later sorteerknoppen toe per kolom.
      </div>
    </section>
  </main>

  <script src="/assets/js/nav-reis.js" defer></script>

  <!-- Dit is jullie bestaande script (hernoemd). -->
  <script src="/assets/js/last-minutes.js" defer></script>

  <!-- Page glue: reset-knop voor filters -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const btn = document.getElementById("btn-reset-filters");
      if (!btn) return;

      btn.addEventListener("click", () => {
        const bestemming = document.getElementById("bestemmingFilter");
        const vertrek = document.getElementById("vertrekdatumFilter");
        const personen = document.getElementById("personenFilter");

        if (bestemming) bestemming.value = "all";
        if (vertrek) vertrek.value = "all";
        if (personen) personen.value = "all";

        // trigger applyFilter if available
        if (typeof applyFilter === "function") {
          // columns live in init scope; applyFilter expects columns param in your code.
          // We'll just dispatch change events to reuse existing listeners:
          [bestemming, vertrek, personen].forEach(el => el && el.dispatchEvent(new Event("change")));
        }
      });
    });
  </script>
</body>
</html>
