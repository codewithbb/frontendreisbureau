<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>CV Upload Test</title>
</head>
<body>

<h2>Test CV upload</h2>

<input type="file" id="cvFile" accept="application/pdf" />
<br><br>
<button id="uploadBtn">Upload CV</button>

<h3>Response</h3>
<pre id="responseBox">Nog geen response</pre>

<script>
    const uploadBtn = document.getElementById("uploadBtn");
    const responseBox = document.getElementById("responseBox");

    uploadBtn.addEventListener("click", async () => {
        const fileInput = document.getElementById("cvFile");

        if (!fileInput.files.length) {
            alert("Selecteer eerst een PDF");
            return;
        }

        const formData = new FormData();
        formData.append("file", fileInput.files[0]);

        responseBox.textContent = "Bezig met uploaden...";

        try {
            const response = await fetch("http://localhost:5001/cv/upload", {
                method: "POST",
                body: formData
            });

            const data = await response.json();
            responseBox.textContent = JSON.stringify(data, null, 2);

        } catch (err) {
            responseBox.textContent = "Fout: " + err;
        }
    });
</script>

</body>
</html>
